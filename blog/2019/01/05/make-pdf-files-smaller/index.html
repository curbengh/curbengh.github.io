<!DOCTYPE html><html lang="en-GB"><head><meta charset="utf-8"><title>Make PDF files smaller | Ming Di Leom&#39;s Blog</title><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://mdleom.com/blog/2019/01/05/make-pdf-files-smaller/"><meta name="description" content="Convert to grayscale and reduce the resolution."><meta property="article:author" content="Ming Di Leom"><meta property="article:tag" content="pdf"><meta property="og:type" content="article"><meta property="og:title" content="Make PDF files smaller"><meta property="og:url" content="https://mdleom.com/blog/2019/01/05/make-pdf-files-smaller/"><meta property="og:site_name" content="Ming Di Leom&#39;s Blog"><meta property="og:description" content="Convert to grayscale and reduce the resolution."><meta property="og:locale" content="en_GB"><meta property="og:image" content="https://mdleom.com/screenshot/blog/2019/01/05/make-pdf-files-smaller/"><meta property="article:published_time" content="2019-01-05T00:00:00.000Z"><link rel="alternate" href="/atom.xml" title="Ming Di Leom's Blog" type="application/atom+xml"><link rel="icon" href="/favicon.ico"><link rel="icon" href="/svg/favicon.svg" type="image/svg+xml" sizes="any"><link rel="apple-touch-icon" href="/apple-touch-icon-180x180.png"><link rel="manifest" href="/site.webmanifest"><link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml"><link rel="stylesheet" href="/css/chameleon.css"><meta name="yandex-verification" content="e026a03a5dd06730"><meta name="generator" content="Hexo 7.1.1"></head><body><div id="container" class="container"><article id="post-make-pdf-files-smaller" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting"><header id="header" class="header"><nav class="main-nav"><a class="main-nav-link" href="/">Home</a> <a class="main-nav-link" href="/blog/">Blog</a> <a class="main-nav-link" href="/about/">About</a> <a class="main-nav-link" href="/atom.xml">Feed</a> <a class="main-nav-link" href="https://gitlab.com/curben/blog" rel="noopener external nofollow noreferrer">GitLab</a><div class="search-container"><form id="searchForm" method="post" action="https://duckduckgo.com/" rel="noopener external nofollow noreferrer" role="search"><input type="search" name="q" class="search-box" placeholder="Search..." title="Powered by DuckDuckGo" enterkeyhint="search"> <input type="hidden" name="sites" value="mdleom.com"> <input type="hidden" name="kd" value="-1"> <input type="hidden" name="kg" value="p"> <input type="hidden" name="kae" value="#000"> <a class="search-button" id="search-click"><img src="/svg/search.svg"></a></form></div></nav><nav class="mobile-nav"><a class="site-title" href="/">mdleom.com</a><ul class="mobile-nav-menu"><label for="mobile-menu-toggle"><a class="no-underline" id="menu-button">&#9776;</a></label> <input id="mobile-menu-toggle" type="checkbox"><ul id="mobile-nav-link"><div class="search-container"><form id="searchFormMob" method="post" action="https://duckduckgo.com/" rel="noopener external nofollow noreferrer" role="search"><input type="search" name="q" class="search-box" placeholder="Search..." title="Powered by DuckDuckGo" enterkeyhint="search"> <input type="hidden" name="sites" value="mdleom.com"> <input type="hidden" name="kd" value="-1"> <input type="hidden" name="kg" value="p"> <input type="hidden" name="kae" value="#000"> <a class="search-button" id="search-click-mobile"><img src="/svg/search.svg"></a></form></div><i>Powered by DuckDuckGo</i> <a class="mobile-nav-link-a" href="/">Home</a> <a class="mobile-nav-link-a" href="/blog/">Blog</a> <a class="mobile-nav-link-a" href="/about/">About</a> <a class="mobile-nav-link-a" href="/atom.xml">Feed</a> <a class="mobile-nav-link-a" href="https://gitlab.com/curben/blog" rel="noopener external nofollow noreferrer">GitLab</a></ul></ul></nav></header><hr class="header-hr"><div class="article-inner"><header class="article-header"><h1 class="p-name entry-title article-title" itemprop="headline name">Make PDF files smaller <a id="btnshare"><img src="/svg/share.svg"></a></h1></header><p class="p-summary">Convert to grayscale and reduce the resolution.</p><div class="e-content article-entry" itemprop="articleBody"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Single-PDF"><span class="toc-text">Single PDF</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PDFs-in-a-folder"><span class="toc-text">PDFs in a folder</span></a></li></ol><p>The most effective ways of reducing the file size of a PDF is by converting to grayscale and reduce the resolution.</p><p>Requirement: ghostscript (installed by default in Ubuntu)</p><h2 id="Single-PDF">Single PDF <a href="#Single-PDF" class="headerlink" title="Single PDF">§</a></h2><p>Save the following script as “pdfcompress.sh”.</p><p>Usage: <code>sh pdfcompress.sh input.pdf</code></p><p>The output compressed file is named as “input.compressed.pdf”</p><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/sh</span>

filename=$(<span class="hljs-built_in">basename</span> <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span>)
<span class="hljs-built_in">dir</span>=$(<span class="hljs-built_in">dirname</span> <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span>)

gs \
  -sOutputFile=<span class="hljs-string">&quot;<span class="hljs-variable">$dir</span>/<span class="hljs-variable">$&#123;filename%.*&#125;</span>.compressed.pdf&quot;</span> \
  -sDEVICE=pdfwrite \
  -dPDFSETTINGS=/ebook \
  -sColorConversionStrategy=Gray \
  -sColorConversionStrategyForImages=/Gray \
  -dProcessColorModel=/DeviceGray \
  -dCompatibilityLevel=1.4 \
  -dNOPAUSE -dBATCH -dQUIET \
  <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span></code><button class="copy-button">Copy</button></pre><p>Options (<a href="https://ghostscript.com/doc/current/Ps2pdf.htm#Options" rel="noopener external nofollow noreferrer">more info</a>):</p><ul><li>Remove <strong>ColorConversionStrategy</strong>, <strong>ColorConversionStrategyForImages</strong> and <strong>ProcessColorModel</strong> lines to retain colour.</li><li><strong>PDFSETTINGS</strong>:<ul><li><em>&#x2F;default</em> selects output intended to be useful across a wide variety of uses. 72 DPI.</li><li><em>&#x2F;screen</em> selects low-resolution output similar to the Acrobat Distiller “Screen Optimized” setting. 72 DPI.</li><li><em>&#x2F;ebook</em> selects medium-resolution output similar to the Acrobat Distiller “eBook” setting. 150 DPI.</li><li><em>&#x2F;printer</em> selects output similar to the Acrobat Distiller “Print Optimized” setting. 300 DPI.</li><li><em>&#x2F;prepress</em> selects output similar to Acrobat Distiller “Prepress Optimized” setting. 300 DPI.</li></ul></li></ul><h2 id="PDFs-in-a-folder">PDFs in a folder <a href="#PDFs-in-a-folder" class="headerlink" title="PDFs in a folder">§</a></h2><p>Use the following script to compress all PDFs in a folder.</p><p>Usage: <code>sh pdfcompress.sh &#39;target folder&#39;</code></p><p><em>If <code>&#39;target folder&#39;</code> is not specified, defaults to current directory.</em></p><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/sh</span>

<span class="hljs-keyword">if</span> [ -n <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span> ]; <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">cd</span> <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> *.pdf; <span class="hljs-keyword">do</span>
    [ -f <span class="hljs-string">&quot;<span class="hljs-variable">$i</span>&quot;</span> ] || <span class="hljs-built_in">break</span>

  <span class="hljs-comment"># Skip compressed PDFs</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$i</span>&quot;</span> | grep --quiet <span class="hljs-string">&quot;.compressed.pdf&quot;</span>

  <span class="hljs-keyword">if</span> [ $? = 1 ]; <span class="hljs-keyword">then</span>
    gs \
      -sOutputFile=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;i%.*&#125;</span>.compressed.pdf&quot;</span> \
      -sDEVICE=pdfwrite \
      -dPDFSETTINGS=/ebook \
      -sColorConversionStrategy=Gray \
      -sColorConversionStrategyForImages=/Gray \
      -dProcessColorModel=/DeviceGray \
      -dCompatibilityLevel=1.4 \
      -dNOPAUSE -dBATCH -dQUIET \
      <span class="hljs-string">&quot;<span class="hljs-variable">$i</span>&quot;</span>
  <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span></code><button class="copy-button">Copy</button></pre><p>If you prefer to use the original filename as the compressed version and rename the original uncompressed’s to “*.original.pdf”,</p><p><em>Following script doesn’t skip previously compressed PDFs</em></p><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/sh</span>

<span class="hljs-keyword">if</span> [ -n <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span> ]; <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">cd</span> <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> *.pdf; <span class="hljs-keyword">do</span>
  [ -f <span class="hljs-string">&quot;<span class="hljs-variable">$i</span>&quot;</span> ] || <span class="hljs-built_in">break</span>

  <span class="hljs-comment"># Rename original file to *.original.pdf</span>
  original=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;i%.*&#125;</span>.original.pdf&quot;</span>
  <span class="hljs-built_in">mv</span> <span class="hljs-string">&quot;<span class="hljs-variable">$i</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$original</span>&quot;</span>

  gs \
    -sOutputFile=<span class="hljs-string">&quot;<span class="hljs-variable">$i</span>&quot;</span> \
    -sDEVICE=pdfwrite \
    -dPDFSETTINGS=/ebook \
    -sColorConversionStrategy=Gray \
    -sColorConversionStrategyForImages=/Gray \
    -dProcessColorModel=/DeviceGray \
    -dCompatibilityLevel=1.4 \
    -dNOPAUSE -dBATCH -dQUIET \
    <span class="hljs-string">&quot;<span class="hljs-variable">$original</span>&quot;</span>
<span class="hljs-keyword">done</span></code><button class="copy-button">Copy</button></pre><p><br><br><br>Source: <a href="https://www.internalpointers.com/post/compress-pdf-file-ghostscript-linux" rel="noopener external nofollow noreferrer">Internal Pointers</a>, <a href="https://gist.github.com/firstdoit/6390547" rel="noopener external nofollow noreferrer">firstdoit</a>, <a href="https://gist.github.com/ahmed-musallam/27de7d7c5ac68ecbd1ed65b6b48416f9" rel="noopener external nofollow noreferrer">ahmed-musallam</a>, <a href="https://ghostscript.com/doc/current/Ps2pdf.htm" rel="noopener external nofollow noreferrer">Ghostscript Docs</a></p></div><footer class="article-footer"><ul class="article-meta"><li><span class="label">Published Date:</span> <time class="dt-published" datetime="2019-01-05T00:00:00.000Z" itemprop="datePublished">5 <a href="/blog/2019/01/" title="See January 2019's posts">Jan</a> <a href="/blog/2019/" title="See 2019's posts">2019</a></time></li><li><span class="label">Tag:</span><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pdf/" rel="tag">Pdf</a></li></ul></li><li><span class="label">Source:</span> <a href="https://gitlab.com/curben/blog/-/blob/master/source/_posts/make-pdf-files-smaller.md" rel="noopener external nofollow noreferrer">make-pdf-files-smaller.md</a></li><hr></ul></footer></div><nav id="article-nav" class="article-nav"><span class="article-nav-link-wrap newer"><strong>Newer</strong> <a href="/blog/2019/01/07/recommended-android-apps/"><div class="article-nav-title">Recommended open-source Android apps</div></a></span><span class="article-nav-link-wrap older"><strong>Older</strong> <a href="/blog/2018/12/31/facebook-instagram-whatsapp-china/"><div class="article-nav-title">Access Facebook/Instagram/Whatsapp/Google in China</div></a></span></nav></article></div><footer id="footer" class="post-footer footer"><hr><div id="copyright" class="copyright">&copy; 2018-2024 Ming Di Leom. <a href="https://gitlab.com/curben/blog" rel="noopener external nofollow noreferrer">Powered by </a><a href="https://hexo.io/" rel="noopener external nofollow noreferrer">Hexo</a> with <a href="https://gitlab.com/curben/blog/tree/master/themes/chameleon" rel="noopener external nofollow noreferrer">Chameleon</a> theme.<br>Content is available under <a href="https://creativecommons.org/licenses/by-sa/4.0/" rel="noopener external nofollow noreferrer license" itemprop="license">CC-BY-SA 4.0</a>, unless indicated otherwise.<br><a class="main-nav-link" href="/disclaimer/">Disclaimer</a> <a class="main-nav-link" href="https://stats.uptimerobot.com/1394zup2LQ" rel="noopener external nofollow noreferrer">Status</a> <a class="main-nav-link" href="https://xw226dvxac7jzcpsf4xb64r4epr6o5hgn46dxlqk7gnjptakik6xnzqd.onion/" rel="noopener external nofollow noreferrer">Onion</a> <a class="main-nav-link" href="https://gitlab.com/curben/blog#mirrors" rel="noopener external nofollow noreferrer">Eepsite</a></div></footer><script src="/libs/clipboard-2.0.6.min.js" defer></script><script src="/js/copy-button.js"></script><script src="/js/chameleon.js"></script></body></html>