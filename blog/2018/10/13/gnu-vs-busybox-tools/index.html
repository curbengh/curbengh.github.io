<!DOCTYPE html><html lang="en-GB"><head><meta charset="utf-8"><title>GNU vs BusyBox Unix tools | Ming Di Leom&#39;s Blog</title><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://mdleom.com/blog/2018/10/13/gnu-vs-busybox-tools/"><meta name="description" content="Alpine uses BusyBox while Ubuntu uses GNU tools, and they behave differently."><meta property="article:author" content="Ming Di Leom"><meta property="article:tag" content="linux"><meta property="article:tag" content="alpine"><meta property="article:tag" content="busybox"><meta property="og:type" content="article"><meta property="og:title" content="GNU vs BusyBox Unix tools"><meta property="og:url" content="https://mdleom.com/blog/2018/10/13/gnu-vs-busybox-tools/"><meta property="og:site_name" content="Ming Di Leom&#39;s Blog"><meta property="og:description" content="Alpine uses BusyBox while Ubuntu uses GNU tools, and they behave differently."><meta property="og:locale" content="en_GB"><meta property="og:image" content="https://mdleom.com/screenshot/blog/2018/10/13/gnu-vs-busybox-tools/"><meta property="article:published_time" content="2018-10-13T00:00:00.000Z"><meta property="article:modified_time" content="2021-04-19T00:00:00.000Z"><link rel="alternate" href="/atom.xml" title="Ming Di Leom's Blog" type="application/atom+xml"><link rel="icon" href="/favicon.ico"><link rel="icon" href="/svg/favicon.svg" type="image/svg+xml" sizes="any"><link rel="apple-touch-icon" href="/apple-touch-icon-180x180.png"><link rel="manifest" href="/site.webmanifest"><link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml"><link rel="stylesheet" href="/css/chameleon.css"><meta name="yandex-verification" content="e026a03a5dd06730"><meta name="generator" content="Hexo 7.1.1"></head><body><div id="container" class="container"><article id="post-gnu-vs-busybox-tools" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting"><header id="header" class="header"><nav class="main-nav"><a class="main-nav-link" href="/">Home</a> <a class="main-nav-link" href="/blog/">Blog</a> <a class="main-nav-link" href="/about/">About</a> <a class="main-nav-link" href="/atom.xml">Feed</a> <a class="main-nav-link" href="https://gitlab.com/curben/blog" rel="noopener external nofollow noreferrer">GitLab</a><div class="search-container"><form id="searchForm" method="post" action="https://duckduckgo.com/" rel="noopener external nofollow noreferrer" role="search"><input type="search" name="q" class="search-box" placeholder="Search..." title="Powered by DuckDuckGo" enterkeyhint="search"> <input type="hidden" name="sites" value="mdleom.com"> <input type="hidden" name="kd" value="-1"> <input type="hidden" name="kg" value="p"> <input type="hidden" name="kae" value="#000"> <a class="search-button" id="search-click"><img src="/svg/search.svg"></a></form></div></nav><nav class="mobile-nav"><a class="site-title" href="/">mdleom.com</a><ul class="mobile-nav-menu"><label for="mobile-menu-toggle"><a class="no-underline" id="menu-button">&#9776;</a></label> <input id="mobile-menu-toggle" type="checkbox"><ul id="mobile-nav-link"><div class="search-container"><form id="searchFormMob" method="post" action="https://duckduckgo.com/" rel="noopener external nofollow noreferrer" role="search"><input type="search" name="q" class="search-box" placeholder="Search..." title="Powered by DuckDuckGo" enterkeyhint="search"> <input type="hidden" name="sites" value="mdleom.com"> <input type="hidden" name="kd" value="-1"> <input type="hidden" name="kg" value="p"> <input type="hidden" name="kae" value="#000"> <a class="search-button" id="search-click-mobile"><img src="/svg/search.svg"></a></form></div><i>Powered by DuckDuckGo</i> <a class="mobile-nav-link-a" href="/">Home</a> <a class="mobile-nav-link-a" href="/blog/">Blog</a> <a class="mobile-nav-link-a" href="/about/">About</a> <a class="mobile-nav-link-a" href="/atom.xml">Feed</a> <a class="mobile-nav-link-a" href="https://gitlab.com/curben/blog" rel="noopener external nofollow noreferrer">GitLab</a></ul></ul></nav></header><hr class="header-hr"><div class="article-inner"><header class="article-header"><h1 class="p-name entry-title article-title" itemprop="headline name">GNU vs BusyBox Unix tools <a id="btnshare"><img src="/svg/share.svg"></a></h1></header><p class="p-summary">Alpine uses BusyBox while Ubuntu uses GNU tools, and they behave differently.</p><div class="e-content article-entry" itemprop="articleBody"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Intro"><span class="toc-text">Intro</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exit-with-code-1"><span class="toc-text">Exit with code 1</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#List"><span class="toc-text">List</span></a></li></ol><h2 id="Intro">Intro <a href="#Intro" class="headerlink" title="Intro">§</a></h2><blockquote><p>Skip to the <a href="#List">list</a>.</p></blockquote><p>Alpine Linux is known for its minimal size. The ‘<a href="https://www.alpinelinux.org/downloads/" rel="noopener external nofollow noreferrer">mini root filesystem</a>‘ flavour is only 2MB. This size makes it suitable as a Docker image, so CI job can start running script sooner instead of downloading larger image like Ubuntu.</p><p>I use it in my <a href="https://gitlab.com/curben/urlhaus-filter" rel="noopener external nofollow noreferrer">urlhaus-filter</a> repo to run the <a href="https://gitlab.com/curben/urlhaus-filter/tree/master/utils" rel="noopener external nofollow noreferrer">scripts</a> (that update the filter twice a day). When I first started using it on gitlab ci (I only knew about it a week ago), my first impression was that it somehow ships with <a href="https://mdleom.com/2018/10/10/binaries-alpine-docker/">more Unix tools</a> than Ubuntu (not technically correct which I explain later), despite its minimal size. during the setup of the repo, there were many job failure due to incorrect command options or syntax.</p><h2 id="Exit-with-code-1">Exit with code 1 <a href="#Exit-with-code-1" class="headerlink" title="Exit with code 1">§</a></h2><p>While setting up GitLab CI for urlhaus-filter, I encountered many issues despite tested fine on my workstation. Sifting through the error messages, I noticed the Alpine’s Unix tools behave differently than mine. I investigated further by testing the script on an Alpine VM.</p><p>I compared the <code>--version</code> of those tools in Ubuntu and Alpine, and noticed the outputs are totally different. The Alpine tools output <code>BusyBox vXX</code>, which shows they are part of BusyBox. I briefly read up the <a href="https://en.wikipedia.org/wiki/BusyBox#Features" rel="noopener external nofollow noreferrer">wiki</a> and noticed the following line,</p><blockquote><p>…compared GNU, BusyBox, asmutils and Perl implementations of the standard Unix commands…</p></blockquote><p>and the <a href="https://en.wikipedia.org/wiki/BusyBox#Examples" rel="noopener external nofollow noreferrer">examples</a>,</p><blockquote><p>Programs included in BusyBox can be run simply by adding their name as an argument to the BusyBox executable:</p><pre><code>/bin/busybox ls
</code><button class="copy-button">Copy</button></pre><p>…, for example just</p><pre><code>/bin/ls
</code><button class="copy-button">Copy</button></pre><p>after &#x2F;bin&#x2F;ls is linked to &#x2F;bin&#x2F;busybox</p></blockquote><p>So, Alpine uses BusyBox and Ubuntu uses GNU. Ubuntu does include BusyBox by default, but it mostly uses GNU.</p><h2 id="List">List <a href="#List" class="headerlink" title="List">§</a></h2><p>I tested the tools on Alpine and Ubuntu, and noted their behaviour. BusyBox &#x3D; BB.</p><ul><li><strong>gzip&#x2F;gunzip&#x2F;zcat</strong>: BB only support gzip&#x2F;bzip2&#x2F;xz format, use BB’s unzip for zip file. GNU can only extract the first file in a zip.</li><li><strong>unzip</strong>: GNU doesn’t support stdin as input. funzip can decompress from stdin, but only the first file (like zcat). BB support stdin and extract all files, through <code>unzip -</code>.</li><li><strong>sed</strong>: BB doesn’t support -z argument which is used to find&#x2F;replace \n new line character. A <a href="https://stackoverflow.com/a/1252191" rel="noopener external nofollow noreferrer">workaround</a> is <code>sed &#39;:a;N;$!ba;s/\n/&lt;new character&gt;/g&#39; file</code> or <code>sed -e &#39;:a&#39; -e &#39;N&#39; -e &#39;$!ba&#39; -e &#39;s/\n/&lt;new character&gt;/g&#39; file</code>. GNU <code>sed -z &#39;s/\n/&lt;new character&gt;/g&#39;</code> works.</li><li><strong>bsdtar</strong>: Since GNU can only extract the first file, in addition to BB’s unzip, another alternative is bsdtar. bsdtar is available through <code>libarchive-tools</code> package. To extract zip from stdin, use <code>$ bsdtar -xf -</code>.</li><li><strong>patch</strong>: BB doesn’t support <code>--backup</code> option. BSD doesn’t support <code>--verbose</code> option.</li></ul></div><footer class="article-footer"><ul class="article-meta"><li><span class="label">Last Updated:</span> <time class="dt-updated" datetime="2021-04-19T00:00:00.000Z" itemprop="dateModified">19 Apr 2021</time></li><li><span class="label">Published Date:</span> <time class="dt-published" datetime="2018-10-13T00:00:00.000Z" itemprop="datePublished">13 <a href="/blog/2018/10/" title="See October 2018's posts">Oct</a> <a href="/blog/2018/" title="See 2018's posts">2018</a></time></li><li><span class="label">Tag:</span><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/alpine/" rel="tag">Alpine</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/busybox/" rel="tag">Busybox</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/" rel="tag">Linux</a></li></ul></li><li><span class="label">Source:</span> <a href="https://gitlab.com/curben/blog/-/blob/master/source/_posts/gnu-vs-busybox-tools.md" rel="noopener external nofollow noreferrer">gnu-vs-busybox-tools.md</a></li><hr></ul></footer></div><nav id="article-nav" class="article-nav"><span class="article-nav-link-wrap newer"><strong>Newer</strong> <a href="/blog/2018/10/14/spellcheck-language-ghostwriter/"><div class="article-nav-title">Change spellcheck language in Ghostwriter</div></a></span><span class="article-nav-link-wrap older"><strong>Older</strong> <a href="/blog/2018/10/10/binaries-alpine-docker/"><div class="article-nav-title">Default binaries in Alpine docker image</div></a></span></nav></article></div><footer id="footer" class="post-footer footer"><hr><div id="copyright" class="copyright">&copy; 2018-2024 Ming Di Leom. <a href="https://gitlab.com/curben/blog" rel="noopener external nofollow noreferrer">Powered by </a><a href="https://hexo.io/" rel="noopener external nofollow noreferrer">Hexo</a> with <a href="https://gitlab.com/curben/blog/tree/master/themes/chameleon" rel="noopener external nofollow noreferrer">Chameleon</a> theme.<br>Content is available under <a href="https://creativecommons.org/licenses/by-sa/4.0/" rel="noopener external nofollow noreferrer license" itemprop="license">CC-BY-SA 4.0</a>, unless indicated otherwise.<br><a class="main-nav-link" href="/disclaimer/">Disclaimer</a> <a class="main-nav-link" href="https://stats.uptimerobot.com/1394zup2LQ" rel="noopener external nofollow noreferrer">Status</a> <a class="main-nav-link" href="https://xw226dvxac7jzcpsf4xb64r4epr6o5hgn46dxlqk7gnjptakik6xnzqd.onion/" rel="noopener external nofollow noreferrer">Onion</a> <a class="main-nav-link" href="https://gitlab.com/curben/blog#mirrors" rel="noopener external nofollow noreferrer">Eepsite</a></div></footer><script src="/libs/clipboard-2.0.6.min.js" defer></script><script src="/js/copy-button.js"></script><script src="/js/chameleon.js"></script></body></html>