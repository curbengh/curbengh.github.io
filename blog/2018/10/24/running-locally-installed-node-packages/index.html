<!DOCTYPE html><html lang="en-GB"><head><meta charset="utf-8"><title>Running locally installed node packages | Ming Di Leom&#39;s Blog</title><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://mdleom.com/blog/2018/10/24/running-locally-installed-node-packages/"><meta name="description" content="How to run binaries of locally installed node packages."><meta property="article:author" content="Ming Di Leom"><meta property="article:tag" content="javascript"><meta property="article:tag" content="node.js"><meta property="og:type" content="article"><meta property="og:title" content="Running locally installed node packages"><meta property="og:url" content="https://mdleom.com/blog/2018/10/24/running-locally-installed-node-packages/"><meta property="og:site_name" content="Ming Di Leom&#39;s Blog"><meta property="og:description" content="How to run binaries of locally installed node packages."><meta property="og:locale" content="en_GB"><meta property="og:image" content="https://mdleom.com/screenshot/blog/2018/10/24/running-locally-installed-node-packages/"><meta property="article:published_time" content="2018-10-24T00:00:00.000Z"><link rel="alternate" href="/atom.xml" title="Ming Di Leom's Blog" type="application/atom+xml"><link rel="icon" href="/favicon.ico"><link rel="icon" href="/svg/favicon.svg" type="image/svg+xml" sizes="any"><link rel="apple-touch-icon" href="/apple-touch-icon-180x180.png"><link rel="manifest" href="/site.webmanifest"><link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml"><link rel="stylesheet" href="/css/chameleon.css"><meta name="yandex-verification" content="e026a03a5dd06730"><meta name="generator" content="Hexo 7.1.1"></head><body><div id="container" class="container"><article id="post-running-locally-installed-node-packages" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting"><header id="header" class="header"><nav class="main-nav"><a class="main-nav-link" href="/">Home</a> <a class="main-nav-link" href="/blog/">Blog</a> <a class="main-nav-link" href="/about/">About</a> <a class="main-nav-link" href="/atom.xml">Feed</a> <a class="main-nav-link" href="https://gitlab.com/curben/blog" rel="noopener external nofollow noreferrer">GitLab</a><div class="search-container"><form id="searchForm" method="post" action="https://duckduckgo.com/" rel="noopener external nofollow noreferrer" role="search"><input type="search" name="q" class="search-box" placeholder="Search..." title="Powered by DuckDuckGo" enterkeyhint="search"> <input type="hidden" name="sites" value="mdleom.com"> <input type="hidden" name="kd" value="-1"> <input type="hidden" name="kg" value="p"> <input type="hidden" name="kae" value="#000"> <a class="search-button" id="search-click"><img src="/svg/search.svg"></a></form></div></nav><nav class="mobile-nav"><a class="site-title" href="/">mdleom.com</a><ul class="mobile-nav-menu"><label for="mobile-menu-toggle"><a class="no-underline" id="menu-button">&#9776;</a></label> <input id="mobile-menu-toggle" type="checkbox"><ul id="mobile-nav-link"><div class="search-container"><form id="searchFormMob" method="post" action="https://duckduckgo.com/" rel="noopener external nofollow noreferrer" role="search"><input type="search" name="q" class="search-box" placeholder="Search..." title="Powered by DuckDuckGo" enterkeyhint="search"> <input type="hidden" name="sites" value="mdleom.com"> <input type="hidden" name="kd" value="-1"> <input type="hidden" name="kg" value="p"> <input type="hidden" name="kae" value="#000"> <a class="search-button" id="search-click-mobile"><img src="/svg/search.svg"></a></form></div><i>Powered by DuckDuckGo</i> <a class="mobile-nav-link-a" href="/">Home</a> <a class="mobile-nav-link-a" href="/blog/">Blog</a> <a class="mobile-nav-link-a" href="/about/">About</a> <a class="mobile-nav-link-a" href="/atom.xml">Feed</a> <a class="mobile-nav-link-a" href="https://gitlab.com/curben/blog" rel="noopener external nofollow noreferrer">GitLab</a></ul></ul></nav></header><hr class="header-hr"><div class="article-inner"><header class="article-header"><h1 class="p-name entry-title article-title" itemprop="headline name">Running locally installed node packages <a id="btnshare"><img src="/svg/share.svg"></a></h1></header><p class="p-summary">How to run binaries of locally installed node packages.</p><div class="e-content article-entry" itemprop="articleBody"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Method-1"><span class="toc-text">Method 1</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Method-2"><span class="toc-text">Method 2</span></a></li></ol><p>Installing a package with <code>--global</code> introduce more trouble than convenience. Here’s how to run binaries of locally installed node packages.</p><p>By default, <code>npm install</code> installs packages as listed in <code>package.json</code> at ‘node_modules’ of your project folder. When a package ships with executables&#x2F;binaries, usually user would install it globally using <code>sudo npm install --global/-g</code>.</p><p>But you should try to avoid using <code>--global</code>. Installing globally means using a specific version of a package across different projects. It might be fine in certain use cases, but it would cause version conflict time when different project depends on different versions.</p><p>Let say <a href="https://hexo.io/" rel="noopener external nofollow noreferrer">Hexo</a>. It ships with <code>hexo</code> binary, so you can <a href="https://hexo.io/docs/" rel="noopener external nofollow noreferrer">run</a> <code>hexo generate</code> or <code>hexo server</code></p><p>If you install it locally, the shell would complain <code>&#39;hexo&#39; command not found</code> when you try to run it. There are two methods of running the binaries, without using <code>--global</code>.</p><h2 id="Method-1">Method 1 <a href="#Method-1" class="headerlink" title="Method 1">§</a></h2><p>You can add <code>./node_modules/.bin</code> to <strong>$PATH</strong>. The beginning dot is so that it can work in any folder as long your current folder has <code>node_modules</code> folder. This way, you don’t have to add all your project folder to $PATH.</p><p>There are different ways of adding a folder to $PATH. If you simply run <code>export PATH=&quot;$PATH:./node_modules/.bin&quot;</code>, it’s only temporary and would be gone as soon as you close the terminal.</p><p>To make the value persistent, the recommended way is to add it to <code>.profile</code> of your home folder. At least this applies to Ubuntu. To do that,</p><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;PATH=&quot;$PATH:./node_modules/.bin&quot;&#x27;</span> &gt;&gt; ~/.profile</span></code><button class="copy-button">Copy</button></pre><p>If your distro supports <code>.bashrc</code> and doesn’t use <code>.profile</code> at all, run</p><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;export PATH=&quot;$PATH:./node_modules/.bin&quot;&#x27;</span> &gt;&gt; ~/.bashrc</span></code><button class="copy-button">Copy</button></pre><p>The command above <em>append</em> the directory location to $PATH. You might find some instructions online use <code>&quot;./node_modules/.bin:$PATH&quot;</code>, which <em>prepend</em> to $PATH. This makes node packages having precedence over <code>/usr/bin</code>(!). If a node package has malicious binaries with similar name as <a href="/blog/2018/11/08/unix-tools-line-endings/" title="Use Unix line endings in Unix tools">Unix</a> <a href="/blog/2018/10/10/binaries-alpine-docker/" title="Default binaries in Alpine docker image">tools</a> like <code>cd</code> or <code>ls</code>, those will be executed instead of the ones in <code>/usr/bin</code>.</p><h2 id="Method-2">Method 2 <a href="#Method-2" class="headerlink" title="Method 2">§</a></h2><p>This method is mostly used for CI runner, so probably you’re not gonna use it. Anyway, here it goes.</p><p>Put it under <code>script</code> section of package.json. Usually it’s above <code>dependencies</code> section. Assign a name for the command. You can include flags&#x2F;arguments&#x2F;options.</p><p>For example,</p><pre><code class="hljs json"><span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span>
  <span class="hljs-attr">&quot;build&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;hexo generate&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;test&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;snyk auth $SNYK_TOKEN &amp;&amp; snyk protect &amp;&amp; snyk test &amp;&amp; snyk monitor&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;postbuild&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;renovate --token $BOT_TOKEN --platform &#x27;gitlab&#x27; --onboarding false --update-lock-files false --labels &#x27;renovate&#x27; --recreate-closed true curben/blog&quot;</span>
<span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span></code><button class="copy-button">Copy</button></pre><p>Running <code>npm run test</code> would execute <code>snyk auth $SNYK_TOKEN &amp;&amp; snyk protect &amp;&amp; snyk test &amp;&amp; snyk monitor</code>.</p><p>So, back to the Hexo example, you <em>could</em> put its most common operations like <code>hexo new post</code>, <code>hexo clean</code>, <code>hexo generate</code> or <code>hexo server</code> into the “scripts” section, and then <code>npm run [name]</code>.</p><p>Source: <a href="https://firstdoit.com/no-need-for-globals-using-npm-dependencies-in-npm-scripts-3dfb478908?gi=850cae7e854e" rel="noopener external nofollow noreferrer">[1]</a>, <a href="http://2ality.com/2016/01/locally-installed-npm-executables.html" rel="noopener external nofollow noreferrer">[2]</a></p></div><footer class="article-footer"><ul class="article-meta"><li><span class="label">Published Date:</span> <time class="dt-published" datetime="2018-10-24T00:00:00.000Z" itemprop="datePublished">24 <a href="/blog/2018/10/" title="See October 2018's posts">Oct</a> <a href="/blog/2018/" title="See 2018's posts">2018</a></time></li><li><span class="label">Tag:</span><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/" rel="tag">Javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/node-js/" rel="tag">Node.js</a></li></ul></li><li><span class="label">Source:</span> <a href="https://gitlab.com/curben/blog/-/blob/master/source/_posts/running-locally-installed-node-packages.md" rel="noopener external nofollow noreferrer">running-locally-installed-node-packages.md</a></li><hr></ul></footer></div><nav id="article-nav" class="article-nav"><span class="article-nav-link-wrap newer"><strong>Newer</strong> <a href="/blog/2018/10/24/disable-control-alt-s-mate-shortcut/"><div class="article-nav-title">How to disable Control+Alt+S shortcut in MATE</div></a></span><span class="article-nav-link-wrap older"><strong>Older</strong> <a href="/blog/2018/10/18/edit-multiple-questions-limesurvey/"><div class="article-nav-title">Edit multiple questions on LimeSurvey</div></a></span></nav></article></div><footer id="footer" class="post-footer footer"><hr><div id="copyright" class="copyright">&copy; 2018-2024 Ming Di Leom. <a href="https://gitlab.com/curben/blog" rel="noopener external nofollow noreferrer">Powered by </a><a href="https://hexo.io/" rel="noopener external nofollow noreferrer">Hexo</a> with <a href="https://gitlab.com/curben/blog/tree/master/themes/chameleon" rel="noopener external nofollow noreferrer">Chameleon</a> theme.<br>Content is available under <a href="https://creativecommons.org/licenses/by-sa/4.0/" rel="noopener external nofollow noreferrer license" itemprop="license">CC-BY-SA 4.0</a>, unless indicated otherwise.<br><a class="main-nav-link" href="/disclaimer/">Disclaimer</a> <a class="main-nav-link" href="https://stats.uptimerobot.com/1394zup2LQ" rel="noopener external nofollow noreferrer">Status</a> <a class="main-nav-link" href="https://xw226dvxac7jzcpsf4xb64r4epr6o5hgn46dxlqk7gnjptakik6xnzqd.onion/" rel="noopener external nofollow noreferrer">Onion</a> <a class="main-nav-link" href="https://gitlab.com/curben/blog#mirrors" rel="noopener external nofollow noreferrer">Eepsite</a></div></footer><script src="/libs/clipboard-2.0.6.min.js" defer></script><script src="/js/copy-button.js"></script><script src="/js/chameleon.js"></script></body></html>