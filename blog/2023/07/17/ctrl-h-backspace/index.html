<!DOCTYPE html><html lang="en-GB"><head><meta charset="utf-8"><title>Mapping Ctrl+H to Backspace in terminal emulator | Ming Di Leom&#39;s Blog</title><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://mdleom.com/blog/2023/07/17/ctrl-h-backspace/"><meta name="description" content="Also fix Ctrl+Backspace in PowerShell"><meta property="article:author" content="Ming Di Leom"><meta property="article:tag" content="linux"><meta property="article:tag" content="zsh"><meta property="article:tag" content="powershell"><meta property="og:type" content="article"><meta property="og:title" content="Mapping Ctrl+H to Backspace in terminal emulator"><meta property="og:url" content="https://mdleom.com/blog/2023/07/17/ctrl-h-backspace/"><meta property="og:site_name" content="Ming Di Leom&#39;s Blog"><meta property="og:description" content="Also fix Ctrl+Backspace in PowerShell"><meta property="og:locale" content="en_GB"><meta property="og:image" content="https://mdleom.com/screenshot/blog/2023/07/17/ctrl-h-backspace/"><meta property="article:published_time" content="2023-07-17T00:00:00.000Z"><link rel="alternate" href="/atom.xml" title="Ming Di Leom's Blog" type="application/atom+xml"><link rel="icon" href="/favicon.ico"><link rel="icon" href="/svg/favicon.svg" type="image/svg+xml" sizes="any"><link rel="apple-touch-icon" href="/apple-touch-icon-180x180.png"><link rel="manifest" href="/site.webmanifest"><link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml"><link rel="stylesheet" href="/css/chameleon.css"><meta name="yandex-verification" content="e026a03a5dd06730"><meta name="generator" content="Hexo 7.1.1"></head><body><div id="container" class="container"><article id="post-ctrl-h-backspace" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting"><header id="header" class="header"><nav class="main-nav"><a class="main-nav-link" href="/">Home</a> <a class="main-nav-link" href="/blog/">Blog</a> <a class="main-nav-link" href="/about/">About</a> <a class="main-nav-link" href="/atom.xml">Feed</a> <a class="main-nav-link" href="https://gitlab.com/curben/blog" rel="noopener external nofollow noreferrer">GitLab</a><div class="search-container"><form id="searchForm" method="post" action="https://duckduckgo.com/" rel="noopener external nofollow noreferrer" role="search"><input type="search" name="q" class="search-box" placeholder="Search..." title="Powered by DuckDuckGo" enterkeyhint="search"> <input type="hidden" name="sites" value="mdleom.com"> <input type="hidden" name="kd" value="-1"> <input type="hidden" name="kg" value="p"> <input type="hidden" name="kae" value="#000"> <a class="search-button" id="search-click"><img src="/svg/search.svg"></a></form></div></nav><nav class="mobile-nav"><a class="site-title" href="/">mdleom.com</a><ul class="mobile-nav-menu"><label for="mobile-menu-toggle"><a class="no-underline" id="menu-button">&#9776;</a></label> <input id="mobile-menu-toggle" type="checkbox"><ul id="mobile-nav-link"><div class="search-container"><form id="searchFormMob" method="post" action="https://duckduckgo.com/" rel="noopener external nofollow noreferrer" role="search"><input type="search" name="q" class="search-box" placeholder="Search..." title="Powered by DuckDuckGo" enterkeyhint="search"> <input type="hidden" name="sites" value="mdleom.com"> <input type="hidden" name="kd" value="-1"> <input type="hidden" name="kg" value="p"> <input type="hidden" name="kae" value="#000"> <a class="search-button" id="search-click-mobile"><img src="/svg/search.svg"></a></form></div><i>Powered by DuckDuckGo</i> <a class="mobile-nav-link-a" href="/">Home</a> <a class="mobile-nav-link-a" href="/blog/">Blog</a> <a class="mobile-nav-link-a" href="/about/">About</a> <a class="mobile-nav-link-a" href="/atom.xml">Feed</a> <a class="mobile-nav-link-a" href="https://gitlab.com/curben/blog" rel="noopener external nofollow noreferrer">GitLab</a></ul></ul></nav></header><hr class="header-hr"><div class="article-inner"><header class="article-header"><h1 class="p-name entry-title article-title" itemprop="headline name">Mapping Ctrl+H to Backspace in terminal emulator <a id="btnshare"><img src="/svg/share.svg"></a></h1></header><p class="p-summary">Also fix Ctrl+Backspace in PowerShell</p><div class="e-content article-entry" itemprop="articleBody"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#TERM-is-not-the-terminal-emulator"><span class="toc-text">$TERM is not the terminal emulator</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Shell-does-not-recognise-Ctrl-Backspace"><span class="toc-text">Shell does not recognise Ctrl+Backspace</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Remap-Ctrl-h-to"><span class="toc-text">Remap Ctrl+h to ^?</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#kitty"><span class="toc-text">kitty</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Windows-Terminal"><span class="toc-text">Windows Terminal</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Map-Ctrl-Backspace-to-backward-kill-word"><span class="toc-text">Map Ctrl+Backspace to backward-kill-word</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Windows-Terminal-1"><span class="toc-text">Windows Terminal</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#PowerShell"><span class="toc-text">PowerShell</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#zsh"><span class="toc-text">zsh</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bash"><span class="toc-text">bash</span></a></li></ol></li></ol></li></ol><p>A few months ago, there was <a href="https://www.masteringemacs.org/article/keyboard-shortcuts-every-command-line-hacker-should-know-about-gnu-readline" rel="noopener external nofollow noreferrer">an article</a> which encouraged Linux users to use more readline keyboard shortcuts. readline keyboard shortcuts are based on Emacs keybindings, while also support switching to vi keybindings. At that time, I was only familiar with <code>Ctrl+a</code> (line start) and <code>Ctrl+e</code> (line end). Interested to learn more tricks, I went on search for a cheatsheet and <a href="https://clementc.github.io/blog/2018/01/25/moving_cli/" rel="noopener external nofollow noreferrer">found this</a>. I then added two missing shortcuts (<code>Ctrl+h</code> &amp; <code>Ctrl+d</code>), printed it out and stick it to my desk.</p><p><a href="/img/20230717/readline-shortcuts.png"><img srcset="/img/20230717/readline-shortcuts.png?f=auto&width=320 320w,/img/20230717/readline-shortcuts.png?f=auto&width=468 468w,/img/20230717/readline-shortcuts.png?f=auto&width=768 768w,/img/20230717/readline-shortcuts.png?f=auto 800w" sizes="(max-width: 320px) 320px,(max-width: 468px) 468px,(max-width: 768px) 768px,800px" src="/img/20230717/readline-shortcuts.png?f=auto" title="readline keyboard shortcuts" alt="readline keyboard shortcuts" loading="lazy"></a></p><p>However there were two shortcuts which did not work as intended: <code>Ctrl+h</code> and <code>Ctrl+Backspace</code>. The first one is <a href="https://en.wikipedia.org/wiki/GNU_Readline#Emacs_keyboard_shortcuts" rel="noopener external nofollow noreferrer">supposed to</a> be equivalent to backspace, but it was deleting previous word just like <code>Ctrl+Backspace</code> or <code>Ctrl+w</code>. The second one did not work on PowerShell’s Emacs mode.</p><p>While looking for a workaround for other terminal and shell, I find it helpful to remember these two facts so that you can stay on the right track.</p><ul><li>$TERM does not refer to the terminal emulator</li><li>Shell does not recognise Ctrl+Backspace</li></ul><h2 id="TERM-is-not-the-terminal-emulator">$TERM is not the terminal emulator <a href="#TERM-is-not-the-terminal-emulator" class="headerlink" title="$TERM is not the terminal emulator">§</a></h2><p>In Kitty, <code>$TERM</code> is “xterm-kitty”; most other Linux terminals output it as “xterm-256color”. The value actually refers to the “<a href="https://en.wikipedia.org/wiki/Terminfo" rel="noopener external nofollow noreferrer">terminfo</a>“ being used and not the <a href="https://en.wikipedia.org/wiki/Xterm" rel="noopener external nofollow noreferrer">terminal emulator</a>.</p><h2 id="Shell-does-not-recognise-Ctrl-Backspace">Shell does not recognise Ctrl+Backspace <a href="#Shell-does-not-recognise-Ctrl-Backspace" class="headerlink" title="Shell does not recognise Ctrl+Backspace">§</a></h2><p>When Ctrl+Backspace is pressed, a terminal emulator either sends “^?” or “^H” <a href="https://en.wikipedia.org/wiki/C0_and_C1_control_codes#C0_controls" rel="noopener external nofollow noreferrer">control character</a> to the shell, which then initiate an action (e.g. “backward-kill-word”).</p><p>“^[character]“ is first and foremost a <a href="https://en.wikipedia.org/wiki/Caret_notation" rel="noopener external nofollow noreferrer">caret notation</a> of a control character, a friendlier representation of hexadecimal, much like hexadecimal is a nicer representation of binary. “^H” actually means control-code-8 (H is the eighth letter), instead of representing <code>Ctrl+h</code>. “^H” can be entered using <code>Ctrl+h</code> simply because it is more practical than having a dedicated key for each control character on a keyboard.</p><h2 id="Remap-Ctrl-h-to">Remap Ctrl+h to ^? <a href="#Remap-Ctrl-h-to" class="headerlink" title="Remap Ctrl+h to ^?">§</a></h2><p>Most terminal emulators map <code>Backspace</code> to “^?” and <code>Ctrl+Backspace</code> to “^H”. Since <code>Ctrl+h</code> is also mapped to “^H”, thus sharing a similar action (“backward-kill-word”) with <code>Ctrl+Backspace</code>. The easiest fix is to remap <code>Ctrl+h</code> to “^?”. This approach only needs to configure the terminal emulator.</p><p>To check which control character is mapped to:</p><pre><code class="hljs plaintext">$ showkey -a

# backspace
^?   127 0177 0x7f

# ctrl+ backspace
^H    8 0010 0x08</code><button class="copy-button">Copy</button></pre><h3 id="kitty">kitty <a href="#kitty" class="headerlink" title="kitty">§</a></h3><p><code>map ctrl+h send_text normal \x7f</code></p><p>Add the above line to the end of “$HOME&#x2F;.config&#x2F;kitty&#x2F;kitty.conf”. “7f” is the hex of “^?”.</p><p>Press <code>Ctrl+Shirt+F5</code> to reload the config and run <code>showkey -a</code> to verify <code>Ctrl+h</code> has been remapped.</p><pre><code class="hljs plaintext">$ showkey -a

# ctrl+h
^?   127 0177 0x7f</code><button class="copy-button">Copy</button></pre><h3 id="Windows-Terminal">Windows Terminal <a href="#Windows-Terminal" class="headerlink" title="Windows Terminal">§</a></h3><p>Go Settings → Open JSON file which will open “$home\AppData\Local\Packages\Microsoft.WindowsTerminal_xxx\LocalState\settings.json”. Under <code>&quot;actions&quot;</code> list, append the following object.</p><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span>
  <span class="hljs-attr">&quot;command&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span>
    <span class="hljs-attr">&quot;action&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sendInput&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;input&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;\u007F&quot;</span>
  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;keys&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ctrl+h&quot;</span>
<span class="hljs-punctuation">&#125;</span></code><button class="copy-button">Copy</button></pre><h2 id="Map-Ctrl-Backspace-to-backward-kill-word">Map Ctrl+Backspace to backward-kill-word <a href="#Map-Ctrl-Backspace-to-backward-kill-word" class="headerlink" title="Map Ctrl+Backspace to backward-kill-word">§</a></h2><p><code>Ctrl+Backspace</code> does not work as expected when I switch the PowerShell’s edit mode to Emacs <code>Set-PSReadLineOption -EditMode Emacs</code>, even though it works in the default <code>Cmd</code> mode. This is because PowerShell binds it to <a href="https://learn.microsoft.com/en-us/powershell/module/psreadline/about/about_psreadline_functions#backwarddeletechar" rel="noopener external nofollow noreferrer"><code>BackwardDeleteChar</code></a> in Emacs mode. Somehow I could not remap it to “^H” (<code>\b</code>).</p><p>Some xterm users also have this issue and a workaround is by <a href="https://www.vinc17.net/unix/ctrl-backspace.en.html" rel="noopener external nofollow noreferrer">mapping it</a> to an unused escape sequence, then bind it to backward-kill-word in the shell. While Windows Terminal <a href="https://learn.microsoft.com/en-us/windows/terminal/customize-settings/actions#send-input" rel="noopener external nofollow noreferrer">supports</a> sending an escape sequence, the corresponding binding is <a href="https://github.com/PowerShell/PSReadLine/issues/3430" rel="noopener external nofollow noreferrer">not supported</a> in PowerShell. Instead of using escape sequence, let’s use a unicode character, specifically a character within the range of <a href="https://en.wikipedia.org/wiki/Private_Use_Areas" rel="noopener external nofollow noreferrer">private use area</a> (<code>U+E888-U+F8FF</code>) to avoid conflict with existing characters. I choose <code>U+E888</code> for this example.</p><p>Anyhow, it is only a tiny issue for me since I can always use <code>Ctrl+w</code>.</p><h3 id="Windows-Terminal-1">Windows Terminal <a href="#Windows-Terminal-1" class="headerlink" title="Windows Terminal">§</a></h3><p>Go Settings → Open JSON file which will open “$home\AppData\Local\Packages\Microsoft.WindowsTerminal_xxx\LocalState\settings.json”. Under <code>&quot;actions&quot;</code> list, append the following object.</p><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span>
  <span class="hljs-attr">&quot;command&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span>
    <span class="hljs-attr">&quot;action&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sendInput&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;input&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;\uE888&quot;</span>
  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;keys&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ctrl+backspace&quot;</span>
<span class="hljs-punctuation">&#125;</span></code><button class="copy-button">Copy</button></pre><h4 id="PowerShell">PowerShell <a href="#PowerShell" class="headerlink" title="PowerShell">§</a></h4><pre><div class="caption"><span>$PROFILE</span></div><code class="hljs ps"><span class="hljs-built_in">Set-PSReadLineKeyHandler</span> <span class="hljs-literal">-Chord</span> <span class="hljs-string">&quot;`u&#123;E888&#125;&quot;</span> <span class="hljs-literal">-Function</span> BackwardKillWord</code><button class="copy-button">Copy</button></pre><p>The following Windows Terminal + PowerShell configs did not work for me. Windows Terminal did yield the correct control character, but somehow PowerShell could not recognise it.</p><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span>
  <span class="hljs-attr">&quot;command&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span>
    <span class="hljs-attr">&quot;action&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sendInput&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;input&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;\u007F&quot;</span>
  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;keys&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;backspace&quot;</span>
<span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span>
<span class="hljs-punctuation">&#123;</span>
  <span class="hljs-attr">&quot;command&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span>
    <span class="hljs-attr">&quot;action&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;sendInput&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;input&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;\b&quot;</span>
  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;keys&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ctrl+backspace&quot;</span>
<span class="hljs-punctuation">&#125;</span></code><button class="copy-button">Copy</button></pre><pre><div class="caption"><span>$PROFILE</span></div><code class="hljs ps"><span class="hljs-built_in">Set-PSReadLineKeyHandler</span> <span class="hljs-literal">-Chord</span> <span class="hljs-string">&quot;`u&#123;007F&#125;&quot;</span> <span class="hljs-literal">-Function</span> BackwardDeleteChar
<span class="hljs-built_in">Set-PSReadLineKeyHandler</span> <span class="hljs-literal">-Chord</span> <span class="hljs-string">&quot;`b&quot;</span> <span class="hljs-literal">-Function</span> BackwardKillWord</code><button class="copy-button">Copy</button></pre><h4 id="zsh">zsh <a href="#zsh" class="headerlink" title="zsh">§</a></h4><pre><div class="caption"><span>$HOME/.zshrc</span></div><code class="hljs sh"><span class="hljs-built_in">bindkey</span> <span class="hljs-string">&#x27;\uE888&#x27;</span> backward-kill-word</code><button class="copy-button">Copy</button></pre><h4 id="bash">bash <a href="#bash" class="headerlink" title="bash">§</a></h4><pre><div class="caption"><span>$HOME/.bashrc</span></div><code class="hljs sh"><span class="hljs-built_in">bind</span> <span class="hljs-string">&#x27;&quot;\uE888&quot;:backward-kill-word&#x27;</span></code><button class="copy-button">Copy</button></pre></div><footer class="article-footer"><ul class="article-meta"><li><span class="label">Published Date:</span> <time class="dt-published" datetime="2023-07-17T00:00:00.000Z" itemprop="datePublished">17 <a href="/blog/2023/07/" title="See July 2023's posts">Jul</a> <a href="/blog/2023/" title="See 2023's posts">2023</a></time></li><li><span class="label">Tag:</span><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/" rel="tag">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/powershell/" rel="tag">Powershell</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/zsh/" rel="tag">Zsh</a></li></ul></li><li><span class="label">Source:</span> <a href="https://gitlab.com/curben/blog/-/blob/master/source/_posts/ctrl-h-backspace.md" rel="noopener external nofollow noreferrer">ctrl-h-backspace.md</a></li><hr></ul></footer></div><nav id="article-nav" class="article-nav"><span class="article-nav-link-wrap newer"><strong>Newer</strong> <a href="/blog/2023/08/27/saml-scim/"><div class="article-nav-title">Azure AD SSO integration with ServiceNow</div></a></span><span class="article-nav-link-wrap older"><strong>Older</strong> <a href="/blog/2023/06/17/json-splunk-uf/"><div class="article-nav-title">Configure Splunk Universal Forwarder to ingest JSON files</div></a></span></nav></article></div><footer id="footer" class="post-footer footer"><hr><div id="copyright" class="copyright">&copy; 2018-2024 Ming Di Leom. <a href="https://gitlab.com/curben/blog" rel="noopener external nofollow noreferrer">Powered by </a><a href="https://hexo.io/" rel="noopener external nofollow noreferrer">Hexo</a> with <a href="https://gitlab.com/curben/blog/tree/master/themes/chameleon" rel="noopener external nofollow noreferrer">Chameleon</a> theme.<br>Content is available under <a href="https://creativecommons.org/licenses/by-sa/4.0/" rel="noopener external nofollow noreferrer license" itemprop="license">CC-BY-SA 4.0</a>, unless indicated otherwise.<br><a class="main-nav-link" href="/disclaimer/">Disclaimer</a> <a class="main-nav-link" href="https://stats.uptimerobot.com/1394zup2LQ" rel="noopener external nofollow noreferrer">Status</a> <a class="main-nav-link" href="https://xw226dvxac7jzcpsf4xb64r4epr6o5hgn46dxlqk7gnjptakik6xnzqd.onion/" rel="noopener external nofollow noreferrer">Onion</a> <a class="main-nav-link" href="https://gitlab.com/curben/blog#mirrors" rel="noopener external nofollow noreferrer">Eepsite</a></div></footer><script src="/libs/clipboard-2.0.6.min.js" defer></script><script src="/js/copy-button.js"></script><script src="/js/chameleon.js"></script></body></html>