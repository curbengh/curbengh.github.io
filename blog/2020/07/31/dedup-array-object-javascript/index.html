<!DOCTYPE html><html lang="en-GB"><head><meta charset="utf-8"><title>Remove duplicate objects in an array - JavaScript | Ming Di Leom&#39;s Blog</title><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://mdleom.com/blog/2020/07/31/dedup-array-object-javascript/"><meta name="description" content="When all objects have the same keys"><meta property="article:author" content="Ming Di Leom"><meta property="article:tag" content="javascript"><meta property="og:type" content="article"><meta property="og:title" content="Remove duplicate objects in an array - JavaScript"><meta property="og:url" content="https://mdleom.com/blog/2020/07/31/dedup-array-object-javascript/"><meta property="og:site_name" content="Ming Di Leom&#39;s Blog"><meta property="og:description" content="When all objects have the same keys"><meta property="og:locale" content="en_GB"><meta property="og:image" content="https://mdleom.com/screenshot/blog/2020/07/31/dedup-array-object-javascript/"><meta property="article:published_time" content="2020-07-31T00:00:00.000Z"><link rel="alternate" href="/atom.xml" title="Ming Di Leom's Blog" type="application/atom+xml"><link rel="icon" href="/favicon.ico"><link rel="icon" href="/svg/favicon.svg" type="image/svg+xml" sizes="any"><link rel="apple-touch-icon" href="/apple-touch-icon-180x180.png"><link rel="manifest" href="/site.webmanifest"><link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml"><link rel="stylesheet" href="/css/chameleon.css"><meta name="yandex-verification" content="e026a03a5dd06730"><meta name="generator" content="Hexo 7.1.1"></head><body><div id="container" class="container"><article id="post-dedup-array-object-javascript" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting"><header id="header" class="header"><nav class="main-nav"><a class="main-nav-link" href="/">Home</a> <a class="main-nav-link" href="/blog/">Blog</a> <a class="main-nav-link" href="/about/">About</a> <a class="main-nav-link" href="/atom.xml">Feed</a> <a class="main-nav-link" href="https://gitlab.com/curben/blog" rel="noopener external nofollow noreferrer">GitLab</a><div class="search-container"><form id="searchForm" method="post" action="https://duckduckgo.com/" rel="noopener external nofollow noreferrer" role="search"><input type="search" name="q" class="search-box" placeholder="Search..." title="Powered by DuckDuckGo" enterkeyhint="search"> <input type="hidden" name="sites" value="mdleom.com"> <input type="hidden" name="kd" value="-1"> <input type="hidden" name="kg" value="p"> <input type="hidden" name="kae" value="#000"> <a class="search-button" id="search-click"><img src="/svg/search.svg"></a></form></div></nav><nav class="mobile-nav"><a class="site-title" href="/">mdleom.com</a><ul class="mobile-nav-menu"><label for="mobile-menu-toggle"><a class="no-underline" id="menu-button">&#9776;</a></label> <input id="mobile-menu-toggle" type="checkbox"><ul id="mobile-nav-link"><div class="search-container"><form id="searchFormMob" method="post" action="https://duckduckgo.com/" rel="noopener external nofollow noreferrer" role="search"><input type="search" name="q" class="search-box" placeholder="Search..." title="Powered by DuckDuckGo" enterkeyhint="search"> <input type="hidden" name="sites" value="mdleom.com"> <input type="hidden" name="kd" value="-1"> <input type="hidden" name="kg" value="p"> <input type="hidden" name="kae" value="#000"> <a class="search-button" id="search-click-mobile"><img src="/svg/search.svg"></a></form></div><i>Powered by DuckDuckGo</i> <a class="mobile-nav-link-a" href="/">Home</a> <a class="mobile-nav-link-a" href="/blog/">Blog</a> <a class="mobile-nav-link-a" href="/about/">About</a> <a class="mobile-nav-link-a" href="/atom.xml">Feed</a> <a class="mobile-nav-link-a" href="https://gitlab.com/curben/blog" rel="noopener external nofollow noreferrer">GitLab</a></ul></ul></nav></header><hr class="header-hr"><div class="article-inner"><header class="article-header"><h1 class="p-name entry-title article-title" itemprop="headline name">Remove duplicate objects in an array - JavaScript <a id="btnshare"><img src="/svg/share.svg"></a></h1></header><p class="p-summary">When all objects have the same keys</p><div class="e-content article-entry" itemprop="articleBody"><p>Let’s say you have an array of objects with duplicate entries:</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> input = [
  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;lorem&#x27;</span>, <span class="hljs-attr">item</span>: <span class="hljs-string">&#x27;ipsum&#x27;</span> &#125;,
  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;per&#x27;</span>, <span class="hljs-attr">item</span>: <span class="hljs-string">&#x27;doming&#x27;</span> &#125;,
  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;dolor&#x27;</span>, <span class="hljs-attr">item</span>: <span class="hljs-string">&#x27;lorem&#x27;</span> &#125;,
  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;usu&#x27;</span>, <span class="hljs-attr">item</span>: <span class="hljs-string">&#x27;pericula&#x27;</span> &#125;,
  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;per&#x27;</span>, <span class="hljs-attr">item</span>: <span class="hljs-string">&#x27;doming&#x27;</span> &#125;,
  &#123; <span class="hljs-attr">item</span>: <span class="hljs-string">&#x27;doming&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;per&#x27;</span> &#125;,
  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;dolor&#x27;</span>, <span class="hljs-attr">item</span>: <span class="hljs-string">&#x27;lorem&#x27;</span> &#125;,
  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;quem&#x27;</span>, <span class="hljs-attr">item</span>: <span class="hljs-string">&#x27;graece&#x27;</span> &#125;,
  &#123; <span class="hljs-attr">item</span>: <span class="hljs-string">&#x27;graece&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;quem&#x27;</span> &#125;,
  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;sonet&#x27;</span>, <span class="hljs-attr">item</span>: <span class="hljs-string">&#x27;labitur&#x27;</span> &#125;
];</code><button class="copy-button">Copy</button></pre><p>A usual way of removing the duplicate objects is to use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify" rel="noopener external nofollow noreferrer"><code>JSON.stringify()</code></a> and insert each entry into a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set#Remove_duplicate_elements_from_the_array" rel="noopener external nofollow noreferrer"><code>Set</code></a> then convert back to array. This approach can work if the keys are in the same order, but notice that input has two objects with different order than the rest:</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> input = [
  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;lorem&#x27;</span>, <span class="hljs-attr">item</span>: <span class="hljs-string">&#x27;ipsum&#x27;</span> &#125;,
  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;per&#x27;</span>, <span class="hljs-attr">item</span>: <span class="hljs-string">&#x27;doming&#x27;</span> &#125;,
  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;dolor&#x27;</span>, <span class="hljs-attr">item</span>: <span class="hljs-string">&#x27;lorem&#x27;</span> &#125;,
  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;usu&#x27;</span>, <span class="hljs-attr">item</span>: <span class="hljs-string">&#x27;pericula&#x27;</span> &#125;,
  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;per&#x27;</span>, <span class="hljs-attr">item</span>: <span class="hljs-string">&#x27;doming&#x27;</span> &#125;,
<mark>  &#123; <span class="hljs-attr">item</span>: <span class="hljs-string">&#x27;doming&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;per&#x27;</span> &#125;,</mark>
  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;dolor&#x27;</span>, <span class="hljs-attr">item</span>: <span class="hljs-string">&#x27;lorem&#x27;</span> &#125;,
  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;quem&#x27;</span>, <span class="hljs-attr">item</span>: <span class="hljs-string">&#x27;graece&#x27;</span> &#125;,
<mark>  &#123; <span class="hljs-attr">item</span>: <span class="hljs-string">&#x27;graece&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;quem&#x27;</span> &#125;,</mark>
  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;sonet&#x27;</span>, <span class="hljs-attr">item</span>: <span class="hljs-string">&#x27;labitur&#x27;</span> &#125;
]</code><button class="copy-button">Copy</button></pre><p>In this case, we can use <code>Object.fromEntries()</code> and <code>Object.entries()</code> to deal with duplicates; I discovered these functions while working on <a href="https://github.com/hexojs/hexo-migrator-wordpress/pull/89" rel="noopener external nofollow noreferrer">hexojs&#x2F;hexo-migrator-wordpress#89</a>. This involves two processes:</p><ol><li>Convert an array of objects to an object.</li><li>Convert the object back to an array of objects.</li></ol><p>The trick here lies with the first step because an object cannot have duplicate keys. Before we use <code>Object.fromEntries()</code>, we first remove the keys:</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> stepOne = input.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">&#123; name, item &#125;</span>) =&gt;</span> [name, item])
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(stepOne)

[
  [ <span class="hljs-string">&#x27;lorem&#x27;</span>, <span class="hljs-string">&#x27;ipsum&#x27;</span> ],
  [ <span class="hljs-string">&#x27;per&#x27;</span>, <span class="hljs-string">&#x27;doming&#x27;</span> ],
  [ <span class="hljs-string">&#x27;dolor&#x27;</span>, <span class="hljs-string">&#x27;lorem&#x27;</span> ],
  [ <span class="hljs-string">&#x27;usu&#x27;</span>, <span class="hljs-string">&#x27;pericula&#x27;</span> ],
  [ <span class="hljs-string">&#x27;per&#x27;</span>, <span class="hljs-string">&#x27;doming&#x27;</span> ],
  [ <span class="hljs-string">&#x27;per&#x27;</span>, <span class="hljs-string">&#x27;doming&#x27;</span> ],
  [ <span class="hljs-string">&#x27;dolor&#x27;</span>, <span class="hljs-string">&#x27;lorem&#x27;</span> ],
  [ <span class="hljs-string">&#x27;quem&#x27;</span>, <span class="hljs-string">&#x27;graece&#x27;</span> ],
  [ <span class="hljs-string">&#x27;quem&#x27;</span>, <span class="hljs-string">&#x27;graece&#x27;</span> ],
  [ <span class="hljs-string">&#x27;sonet&#x27;</span>, <span class="hljs-string">&#x27;labitur&#x27;</span> ]
]</code><button class="copy-button">Copy</button></pre><p>I’m using Object <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" rel="noopener external nofollow noreferrer">destructure</a> here:</p><pre><code class="hljs js">input.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">&#123; name, item &#125;</span>) =&gt;</span> [name, item])

<span class="hljs-comment">// is equivalent to</span>
input.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">element</span>) =&gt;</span> [element.<span class="hljs-property">name</span>, element.<span class="hljs-property">item</span>])</code><button class="copy-button">Copy</button></pre><p>Then we pass <code>stepOne</code> to <code>Object.fromEntries</code>:</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> stepTwo = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(stepOne)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-params">stepTwo</span>)

&#123;
  <span class="hljs-attr">lorem</span>: <span class="hljs-string">&#x27;ipsum&#x27;</span>,
  <span class="hljs-attr">per</span>: <span class="hljs-string">&#x27;doming&#x27;</span>,
  <span class="hljs-attr">dolor</span>: <span class="hljs-string">&#x27;lorem&#x27;</span>,
  <span class="hljs-attr">usu</span>: <span class="hljs-string">&#x27;pericula&#x27;</span>,
  <span class="hljs-attr">quem</span>: <span class="hljs-string">&#x27;graece&#x27;</span>,
  <span class="hljs-attr">sonet</span>: <span class="hljs-string">&#x27;labitur&#x27;</span>
&#125;</code><button class="copy-button">Copy</button></pre><p>Now we have a de-duplicated object. Then, we use <code>Object.entries()</code> to convert it back to an array:</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> stepThree = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(stepTwo)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(stepThree)

[
  [ <span class="hljs-string">&#x27;lorem&#x27;</span>, <span class="hljs-string">&#x27;ipsum&#x27;</span> ],
  [ <span class="hljs-string">&#x27;per&#x27;</span>, <span class="hljs-string">&#x27;doming&#x27;</span> ],
  [ <span class="hljs-string">&#x27;dolor&#x27;</span>, <span class="hljs-string">&#x27;lorem&#x27;</span> ],
  [ <span class="hljs-string">&#x27;usu&#x27;</span>, <span class="hljs-string">&#x27;pericula&#x27;</span> ],
  [ <span class="hljs-string">&#x27;quem&#x27;</span>, <span class="hljs-string">&#x27;graece&#x27;</span> ],
  [ <span class="hljs-string">&#x27;sonet&#x27;</span>, <span class="hljs-string">&#x27;labitur&#x27;</span> ]
]</code><button class="copy-button">Copy</button></pre><p>Finally, we loop through each element to convert it back to an array of objects:</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> stepFour = stepThree.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">[name, item]</span>) =&gt;</span> &#123;
  <span class="hljs-keyword">return</span> &#123; name, item &#125;
&#125;)

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(stepFour)

[
  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;lorem&#x27;</span>, <span class="hljs-attr">item</span>: <span class="hljs-string">&#x27;ipsum&#x27;</span> &#125;,
  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;per&#x27;</span>, <span class="hljs-attr">item</span>: <span class="hljs-string">&#x27;doming&#x27;</span> &#125;,
  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;dolor&#x27;</span>, <span class="hljs-attr">item</span>: <span class="hljs-string">&#x27;lorem&#x27;</span> &#125;,
  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;usu&#x27;</span>, <span class="hljs-attr">item</span>: <span class="hljs-string">&#x27;pericula&#x27;</span> &#125;,
  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;quem&#x27;</span>, <span class="hljs-attr">item</span>: <span class="hljs-string">&#x27;graece&#x27;</span> &#125;,
  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;sonet&#x27;</span>, <span class="hljs-attr">item</span>: <span class="hljs-string">&#x27;labitur&#x27;</span> &#125;
]</code><button class="copy-button">Copy</button></pre><pre><code class="hljs js"><span class="hljs-keyword">const</span> stepFour = stepThree.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">[name, item]</span>) =&gt;</span> &#123;
  <span class="hljs-keyword">return</span> &#123;
    name,
    item
  &#125;
&#125;)

<span class="hljs-comment">// is equivalent to</span>
<span class="hljs-keyword">const</span> stepFour = stepThree.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">element</span>) =&gt;</span> &#123;
  <span class="hljs-keyword">return</span> &#123;
    <span class="hljs-attr">name</span>: element[<span class="hljs-number">0</span>],
    <span class="hljs-attr">item</span>: element[<span class="hljs-number">1</span>]
  &#125;
&#125;)</code><button class="copy-button">Copy</button></pre><p>To put everything together:</p><pre><code class="hljs js"><span class="hljs-comment">// in one-line</span>
<span class="hljs-keyword">const</span> output = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(input.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">&#123; name, item &#125;</span>) =&gt;</span> [name, item]))).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">[name, item]</span>) =&gt;</span> &#123; <span class="hljs-keyword">return</span> &#123; name, item &#125; &#125;)

<span class="hljs-comment">// in a function</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">dedup</span> = (<span class="hljs-params">inArray</span>) =&gt; &#123;
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(input.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">&#123; name, item &#125;</span>) =&gt;</span> &#123;
    <span class="hljs-keyword">return</span> [name, item]
  &#125;)))
    .<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">[name, item]</span>) =&gt;</span> &#123;
      <span class="hljs-keyword">return</span> &#123; name, item &#125;
    &#125;)
&#125;

<span class="hljs-keyword">const</span> output = <span class="hljs-title function_">dedup</span>(input)</code><button class="copy-button">Copy</button></pre></div><footer class="article-footer"><ul class="article-meta"><li><span class="label">Published Date:</span> <time class="dt-published" datetime="2020-07-31T00:00:00.000Z" itemprop="datePublished">31 <a href="/blog/2020/07/" title="See July 2020's posts">Jul</a> <a href="/blog/2020/" title="See 2020's posts">2020</a></time></li><li><span class="label">Tag:</span><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/" rel="tag">Javascript</a></li></ul></li><li><span class="label">Source:</span> <a href="https://gitlab.com/curben/blog/-/blob/master/source/_posts/dedup-array-object-javascript.md" rel="noopener external nofollow noreferrer">dedup-array-object-javascript.md</a></li><hr></ul></footer></div><nav id="article-nav" class="article-nav"><span class="article-nav-link-wrap newer"><strong>Newer</strong> <a href="/blog/2020/08/19/snap-node-spawn/"><div class="article-nav-title">Snap-installed Node.js cannot spawn() a Node.js app</div></a></span><span class="article-nav-link-wrap older"><strong>Older</strong> <a href="/blog/2020/07/18/git-sign-commit-ed25519/"><div class="article-nav-title">Sign Git commit with an EdDSA/Ed25519/Curve25519 key</div></a></span></nav></article></div><footer id="footer" class="post-footer footer"><hr><div id="copyright" class="copyright">&copy; 2018-2024 Ming Di Leom. <a href="https://gitlab.com/curben/blog" rel="noopener external nofollow noreferrer">Powered by </a><a href="https://hexo.io/" rel="noopener external nofollow noreferrer">Hexo</a> with <a href="https://gitlab.com/curben/blog/tree/master/themes/chameleon" rel="noopener external nofollow noreferrer">Chameleon</a> theme.<br>Content is available under <a href="https://creativecommons.org/licenses/by-sa/4.0/" rel="noopener external nofollow noreferrer license" itemprop="license">CC-BY-SA 4.0</a>, unless indicated otherwise.<br><a class="main-nav-link" href="/disclaimer/">Disclaimer</a> <a class="main-nav-link" href="https://stats.uptimerobot.com/1394zup2LQ" rel="noopener external nofollow noreferrer">Status</a> <a class="main-nav-link" href="https://xw226dvxac7jzcpsf4xb64r4epr6o5hgn46dxlqk7gnjptakik6xnzqd.onion/" rel="noopener external nofollow noreferrer">Onion</a> <a class="main-nav-link" href="https://gitlab.com/curben/blog#mirrors" rel="noopener external nofollow noreferrer">Eepsite</a></div></footer><script src="/libs/clipboard-2.0.6.min.js" defer></script><script src="/js/copy-button.js"></script><script src="/js/chameleon.js"></script></body></html>